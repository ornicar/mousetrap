!function(){for(var e,t={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},a=1;a<20;++a)t[111+a]="f"+a;for(a=0;a<=9;++a)t[a+96]=a.toString();function i(e){if("keypress"==e.type){var r=String.fromCharCode(e.which);return e.shiftKey||(r=r.toLowerCase()),r}return t[e.which]?t[e.which]:n[e.which]?n[e.which]:String.fromCharCode(e.which).toLowerCase()}function o(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function c(n,r,a){return a||(a=function(){if(!e)for(var n in e={},t)n>95&&n<112||t.hasOwnProperty(n)&&(e[t[n]]=n);return e}()[n]?"keydown":"keypress"),"keypress"==a&&r.length&&(a="keydown"),a}function s(e,t){var n,a,i,s=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)a=n[i],r[a]&&(a=r[a]),o(a)&&s.push(a);return{key:a,modifiers:s,action:t=c(a,s,t)}}function l(e){var t=this;if(e=e||document,!(t instanceof l))return new l(e);t.target=e,t._callbacks={};var n,r={},a=!1,c=!1,u=!1;function f(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(u=!1)}function p(e,n,a,i,c,s){var l,u,f,p,h=[],y=a.type;if(!t._callbacks[e])return[];for("keyup"==y&&o(e)&&(n=[e]),l=0;l<t._callbacks[e].length;++l)if(u=t._callbacks[e][l],(i||!u.seq||r[u.seq]==u.level)&&y==u.action&&("keypress"==y&&!a.metaKey&&!a.ctrlKey||(f=n,p=u.modifiers,f.sort().join(",")===p.sort().join(",")))){var d=!i&&u.combo==c,m=i&&u.seq==i&&u.level==s;(d||m)&&t._callbacks[e].splice(l,1),h.push(u)}return h}function h(e,t,n){const r=t.target;("esc"==n||"INPUT"!=r.tagName&&"SELECT"!=r.tagName&&"TEXTAREA"!=r.tagName)&&!1===e(t,n)&&(t.preventDefault(),t.stopPropagation())}function y(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=i(e);n&&("keyup"!=e.type||a!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):a=!1)}function d(e,t,o,c){function l(t){return function(){u=t,++r[e],clearTimeout(n),n=setTimeout(f,1e3)}}function p(t){h(o,t,e),"keyup"!==c&&(a=i(t)),setTimeout(f,10)}r[e]=0;for(var y=0;y<t.length;++y){var d=y+1===t.length?p:l(c||s(t[y+1]).action);m(t[y],d,c,e,y)}}function m(e,n,r,a,i){var o,c=(e=e.replace(/\s+/g," ")).split(" ");c.length>1?d(e,c,n,r):(o=s(e,r),t._callbacks[o.key]=t._callbacks[o.key]||[],p(o.key,o.modifiers,{type:o.action},a,e,i),t._callbacks[o.key][a?"unshift":"push"]({callback:n,modifiers:o.modifiers,action:o.action,seq:a,level:i,combo:e}))}t._handleKey=function(e,t,n){var r,a=p(e,t,n),i={},s=0,l=!1;for(r=0;r<a.length;++r)a[r].seq&&(s=Math.max(s,a[r].level));for(r=0;r<a.length;++r)if(a[r].seq){if(a[r].level!=s)continue;l=!0,i[a[r].seq]=1,h(a[r].callback,n,a[r].combo)}else l||h(a[r].callback,n,a[r].combo);var y="keypress"==n.type&&c;n.type!=u||o(e)||y||f(i),c=l&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)m(e[r],t,n)},e.addEventListener("keypress",y),e.addEventListener("keydown",y),e.addEventListener("keyup",y)}l.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},l.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},l.init=function(){var e=l(document);for(var t in e)"_"!==t.charAt(0)&&(l[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},l.init(),window.Mousetrap=l}();